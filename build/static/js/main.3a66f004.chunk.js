(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{39:function(e,t,a){e.exports=a(63)},46:function(e,t,a){},52:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(18),s=a.n(r),l=(a(43),a(44),a(45),a(46),a(13)),c=a(14),i=a(16),u=a(15),m=a(64),d=a(65),h=a(66),p=a(67),f="http://localhost:3001/api/",g=function(e){return{type:"DELETE_TODO",payload:e}},E=function(){return{type:"TODOS_LOADING"}},v=function(e){return{type:"TODOS_FAILED",payload:e}},O=a(6),b=a(22),w=function(){return JSON.parse(localStorage.getItem("loggedIn"))};function j(e){var t=e.todo,a=e.handleStatus,n=e.removeTodo;return t.status?o.a.createElement(m.a,null,o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-3 ml-auto text-right"},o.a.createElement(d.a,{color:"white",onClick:function(){a(t._id,!t.status)}},o.a.createElement("span",{className:"fa fa-check-square-o"}))),o.a.createElement("div",{className:"col-md-4 o text-center"},o.a.createElement("h5",{className:"crossed-line"},t.task)),o.a.createElement("div",{className:"col-md-3 mr-auto"},o.a.createElement(d.a,{color:"white",onClick:function(){n(t._id)}},o.a.createElement("span",{className:"fa fa-trash-o"}))))):o.a.createElement(m.a,null,o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-3 ml-auto text-right"},o.a.createElement(d.a,{color:"white",onClick:function(){a(t._id,!t.status)}},o.a.createElement("span",{className:"fa fa-square-o"}))),o.a.createElement("div",{className:"col-md-4 o text-center"},o.a.createElement("h5",null,t.task)),o.a.createElement("div",{className:"col-md-3 mr-auto"},o.a.createElement(d.a,{color:"white",onClick:function(){n(t._id)}},o.a.createElement("span",{className:"fa fa-trash-o"})))))}var T=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleStatus=function(e,t){n.props.updateStatus(e,t)},n.handleInputKey=function(e){"Enter"===e.key&&(n.props.postTodo(n.state.task,!1),n.setState({task:""}))},n.handleInputChange=function(e){console.log(e.target.value),n.setState({task:e.target.value})},n.state={task:""},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchTodos()}},{key:"render",value:function(){var e=this;if(!w())return o.a.createElement(O.a,{to:"/login"});if(console.log("in Component"),console.log(this.props),this.props.Todos.isLoading)return o.a.createElement("div",null,o.a.createElement("h4",null,"Loading Todos List"));if(this.props.Todos.errMess)return o.a.createElement("div",null,o.a.createElement("h4",null,"Error ",this.props.Todos.errMess));var t=this.props.Todos.todos.map((function(t,a){return o.a.createElement(j,{todo:t,handleStatus:e.handleStatus,removeTodo:e.props.removeTodo,key:a})}));return o.a.createElement("div",{class:"container"},o.a.createElement(h.a,null,o.a.createElement(m.a,null,o.a.createElement("div",{className:"row input-handler"},o.a.createElement("div",{className:"col-md-1 ml-auto text-right"},o.a.createElement("i",{class:"fa fa-pencil-square","aria-hidden":"true"})),o.a.createElement("div",{className:"col-md-4 mr-auto"},o.a.createElement(p.a,{type:"text",placeholder:"TODO",value:this.state.task,name:"task",onKeyUp:this.handleInputKey,onChange:this.handleInputChange})))),t))}}]),a}(n.Component),y=Object(b.b)((function(e){return console.log(e),{Todos:e.Todos}}),(function(e){return{fetchTodos:function(){e((function(e){return e(E(!0)),fetch(f+"todos/"+JSON.parse(localStorage.getItem("user"))._id,{method:"GET",withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json",Cache:"no-cache"},credentials:"same-origin"}).then((function(e){if(console.log("response"),console.log(e),e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw console.log(e),console.log(t.response),t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(t){e(function(e){return{type:"ADD_TODOS",payload:e}}(t))})).catch((function(t){e(v(t.message))}))}))},updateStatus:function(t,a){e(function(e,t){return function(a){return fetch(f+"todos/"+e,{method:"PUT",body:JSON.stringify({status:t}),headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw console.log(e),console.log(t.response),t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(e){return a({type:"UPDATE_TODO",payload:e})})).catch((function(e){console.log("Post Todo : ",e.message),alert("Your Todo could not be posted\nError: "+e.message)}))}}(t,a))},removeTodo:function(t){e(function(e){return function(t){return fetch(f+"todos/"+e,{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin"}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw console.log(e),console.log(t.response),t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(e){console.log(e),t(g(e))})).catch((function(e){console.log("Delete Todo : ",e.message),alert("Your Todo could not be Deleted\nError: "+e.message)}))}}(t))},postTodo:function(t,a){e(function(e,t){return function(a){var n={task:e,status:t,user_id:JSON.parse(localStorage.getItem("user"))._id};return fetch(f+"todos",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw console.log(e),console.log(t.response),t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(e){return a({type:"ADD_TODO",payload:e})})).catch((function(e){console.log("Post Todo : ",e.message),alert("Your Todo could not be posted\nError: "+e.message)}))}}(t,a))}}}))(T),S=(a(52),a(19)),N=a(8),C=(a(53),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,todos:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TODO":return Object(N.a)(Object(N.a)({},e),{},{todos:e.todos.concat(t.payload)});case"ADD_TODOS":t.payload;return Object(N.a)(Object(N.a)({},e),{},{isLoading:!1,errMess:null,todos:t.payload});case"UPDATE_TODO":return Object(N.a)(Object(N.a)({},e),{},{todos:e.todos.map((function(e){return e._id===t.payload._id?t.payload:e}))});case"DELETE_TODO":return console.log(t.payload),Object(N.a)(Object(N.a)({},e),{},{todos:e.todos.filter((function(e){return e._id!==t.payload._id}))});case"TODOS_LOADING":return Object(N.a)(Object(N.a)({},e),{},{isLoading:!0,errMess:null,todos:[]});case"TODOS_FAILED":return Object(N.a)(Object(N.a)({},e),{},{isLoading:!1,errMess:t.payload,todos:[]});default:return e}}),k=a(37),D=a(38),I=a.n(D),L=a(17),_=a(9),x=a(68),A=a(69),P=a(70),J=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){n.setState(Object(L.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),console.log(n.state),console.log("current state is: "+JSON.stringify(n.state));var t=Object(_.a)(n),a={email:n.state.email,password:n.state.password};return fetch(f+"users/login",{method:"POST",body:JSON.stringify(a),withCredentials:!0,credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json",Cache:"no-cache"}}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw console.log(e),console.log(t.response),t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(e){localStorage.setItem("loggedIn","true"),localStorage.setItem("user",JSON.stringify(e)),t.setState({error:""})})).catch((function(e){console.log("Post Todo : ",e.message),t.setState(Object(N.a)(Object(N.a)({},t.state),{},{error:e.message}))}))},n.state={email:"",password:"",error:""},n.handleInputChange=n.handleInputChange.bind(),n.handleSubmit=n.handleSubmit.bind(),n}return Object(c.a)(a,[{key:"render",value:function(){return w()?(this.props.authenticator(w()),o.a.createElement(O.a,{to:"/todos"})):o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6 ml-auto mr-auto"},o.a.createElement(x.a,{onSubmit:this.handleSubmit},o.a.createElement("h4",null,"LogIn"),this.state.error?o.a.createElement("h4",{class:"alert alert-danger"},this.state.error):o.a.createElement("div",null),o.a.createElement(A.a,null,o.a.createElement(P.a,{for:"exampleEmail"},"Email"),o.a.createElement(p.a,{type:"email",name:"email",value:this.state.email,onChange:this.handleInputChange,placeholder:"email"})),o.a.createElement(A.a,null,o.a.createElement(P.a,{for:"examplePassword"},"Password"),o.a.createElement(p.a,{type:"password",name:"password",value:this.state.password,onChange:this.handleInputChange,placeholder:"password"})),o.a.createElement(A.a,null,o.a.createElement(d.a,{color:"success"},"Submit"))))))}}]),a}(n.Component),M=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){n.setState(Object(L.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),console.log(n.state),console.log("current state is: "+JSON.stringify(n.state));var t=Object(_.a)(n),a={name:n.state.name,email:n.state.email,password:n.state.password};return fetch(f+"users/register",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw console.log(e),console.log(t.response),t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(e){alert("Registration Successfull"),t.setState(Object(N.a)(Object(N.a)({},t.state),{},{successfull:!0}))})).catch((function(e){console.log("Post Todo : ",e.message),t.setState(Object(N.a)(Object(N.a)({},t.state),{},{error:e.message}))}))},n.state={name:"",email:"",password:"",error:"",successfull:!1},n.handleInputChange=n.handleInputChange.bind(),n.handleSubmit=n.handleSubmit.bind(),n}return Object(c.a)(a,[{key:"render",value:function(){return w()?o.a.createElement(O.a,{to:"/todos"}):this.state.successfull?o.a.createElement(O.a,{to:"/login"}):o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6 ml-auto mr-auto"},o.a.createElement("h4",null,"Register"),o.a.createElement(x.a,{onSubmit:this.handleSubmit},this.state.error?o.a.createElement("h4",{class:"alert alert-danger"},this.state.error):o.a.createElement("div",null),o.a.createElement(A.a,null,o.a.createElement(P.a,{for:"name"},"Email"),o.a.createElement(p.a,{type:"text",name:"name",id:"name",value:this.state.name,onChange:this.handleInputChange,placeholder:"name"})),o.a.createElement(A.a,null,o.a.createElement(P.a,{for:"email"},"Email"),o.a.createElement(p.a,{type:"email",name:"email",id:"email",value:this.state.email,onChange:this.handleInputChange,placeholder:"email"})),o.a.createElement(A.a,null,o.a.createElement(P.a,{for:"password"},"Password"),o.a.createElement(p.a,{type:"password",name:"password",id:"password",value:this.state.password,onChange:this.handleInputChange,placeholder:"password"})),o.a.createElement(A.a,{check:!0,row:!0},o.a.createElement(d.a,{color:"success"},"Submit"))))))}}]),a}(n.Component),U=a(71),q=a(72),F=a(73),G=a(76),K=a(74),R=a(75),Y=a(12),B=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleLogout=function(){return fetch(f+"users/logout",{withCredentials:!0,credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json",Cache:"no-cache"}}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw console.log(e),console.log(t.response),t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(e){localStorage.removeItem("loggedIn")})).catch((function(e){return console.log("Post Todo : ",e.message)}))},n.updateLogin=function(){n.props.authenticator(!1)},n.state={isNavOpen:!1},n.toggleNav=n.toggleNav.bind(Object(_.a)(n)),n}return Object(c.a)(a,[{key:"toggleNav",value:function(){this.setState({isNavOpen:!this.state.isNavOpen})}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(U.a,{dark:!0,expand:"md"},o.a.createElement("div",{className:"container"},o.a.createElement(q.a,{onClick:this.toggleNav}),o.a.createElement(F.a,{className:"mr-auto",href:"/"},"TODO App"),o.a.createElement(G.a,{isOpen:this.state.isNavOpen,navbar:!0},w()?o.a.createElement(K.a,{className:"ml-auto",navbar:!0},o.a.createElement(R.a,null,o.a.createElement(Y.b,{className:"nav-link",to:""},o.a.createElement("span",{className:"fa fa-user fa-lg"}),"Hey! ",JSON.parse(localStorage.getItem("user")).name)),o.a.createElement(R.a,null,o.a.createElement(Y.b,{className:"nav-link",to:"logout"},o.a.createElement("span",{className:"fa fa-info fa-lg"})," LogOut"))):o.a.createElement(K.a,{navbar:!0,className:"ml-auto"},o.a.createElement(R.a,null,o.a.createElement(Y.b,{className:"nav-link",to:"/login"},o.a.createElement("span",{className:"fa fa-home fa-lg"}),"Login")),o.a.createElement(R.a,null,o.a.createElement(Y.b,{className:"nav-link",to:"/register"},o.a.createElement("span",{className:"fa fa-info fa-lg"})," Register")))))))}}]),a}(n.Component),W=function(e){return localStorage.removeItem("loggedIn"),localStorage.removeItem("user"),e.authenticator(!1),o.a.createElement(O.a,{to:"/"})};var H=function(e){return o.a.createElement("div",{className:"footer"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row justify-content-center"},o.a.createElement("div",{className:"col-auto"},o.a.createElement("p",null,"\xa9 Copyright 2020 - .... (: Aliakber Saifuddin :)")))))},$=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).authenticator=function(e){n.setState({isLogin:e})},console.log(e),n.state={isLogin:!1},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement(Y.a,null,o.a.createElement(B,{isLogin:this.state.isLogin}),o.a.createElement(O.d,null,o.a.createElement(O.b,{path:"/login",component:function(){return o.a.createElement(J,{authenticator:e.authenticator})}}),o.a.createElement(O.b,{path:"/register",component:M}),o.a.createElement(O.b,{path:"/todos",component:y}),o.a.createElement(O.b,{path:"/logout",component:function(){return o.a.createElement(W,{authenticator:e.authenticator})}}),o.a.createElement(O.b,{path:"/",component:function(){return o.a.createElement(J,{authenticator:e.authenticator})}})),o.a.createElement(H,null))}}]),a}(n.Component),z=Object(S.d)(Object(S.c)({Todos:C}),Object(S.a)(k.a,I.a));var Q=function(){return o.a.createElement(b.a,{store:z},o.a.createElement($,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.3a66f004.chunk.js.map